{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import{Container,Typography,Button,Box,Paper,List,ListItem,ListItemText,CircularProgress}from'@mui/material';import{subscribeToGame,startGame}from'../utils/firebaseUtils';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function WaitingRoom(){var _gameData$players$fin;const{gameId}=useParams();const navigate=useNavigate();const[gameData,setGameData]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[countdown,setCountdown]=useState(null);useEffect(()=>{const unsubscribe=subscribeToGame(gameId,data=>{setGameData(data);setLoading(false);});return()=>unsubscribe();},[gameId]);useEffect(()=>{if(countdown>0){const timer=setInterval(()=>{setCountdown(prev=>prev-1);},1000);return()=>clearInterval(timer);}else if(countdown===0){navigate(`/game/${gameId}`);}},[countdown,gameId,navigate]);const handleStartGame=async()=>{try{setLoading(true);await startGame(gameId);setCountdown(5);}catch(err){setError(err.message);setLoading(false);}};if(loading){return/*#__PURE__*/_jsx(Container,{maxWidth:\"sm\",children:/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',display:'flex',justifyContent:'center',alignItems:'center'},children:/*#__PURE__*/_jsx(CircularProgress,{})})});}if(!gameData){return/*#__PURE__*/_jsx(Container,{maxWidth:\"sm\",children:/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',display:'flex',justifyContent:'center',alignItems:'center'},children:/*#__PURE__*/_jsx(Typography,{color:\"error\",children:\"La sala no existe\"})})});}const isHost=((_gameData$players$fin=gameData.players.find(p=>p.isHost))===null||_gameData$players$fin===void 0?void 0:_gameData$players$fin.name)===gameData.host;return/*#__PURE__*/_jsx(Container,{maxWidth:\"sm\",children:/*#__PURE__*/_jsx(Box,{sx:{minHeight:'100vh',display:'flex',flexDirection:'column',justifyContent:'center',alignItems:'center'},children:/*#__PURE__*/_jsxs(Paper,{elevation:3,sx:{p:4,width:'100%',textAlign:'center'},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",component:\"h1\",gutterBottom:true,children:\"Sala de Espera\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",color:\"primary\",gutterBottom:true,children:[\"C\\xF3digo de la sala: \",gameId]}),error&&/*#__PURE__*/_jsx(Typography,{color:\"error\",sx:{mb:2},children:error}),/*#__PURE__*/_jsx(Typography,{variant:\"body1\",sx:{mb:3},children:countdown?`El juego comenzará en ${countdown}...`:'Esperando jugadores...'}),/*#__PURE__*/_jsx(List,{sx:{mb:3},children:gameData.players.map(player=>/*#__PURE__*/_jsx(ListItem,{children:/*#__PURE__*/_jsx(ListItemText,{primary:player.name,secondary:player.isHost?'Host':''})},player.id))}),isHost&&!countdown&&/*#__PURE__*/_jsx(Button,{variant:\"contained\",size:\"large\",fullWidth:true,onClick:handleStartGame,disabled:loading||gameData.players.length<3,children:loading?'Iniciando...':'Iniciar Juego'}),countdown&&/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',mt:2},children:/*#__PURE__*/_jsx(CircularProgress,{})})]})})});}export default WaitingRoom;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","Container","Typography","Button","Box","Paper","List","ListItem","ListItemText","CircularProgress","subscribeToGame","startGame","jsx","_jsx","jsxs","_jsxs","WaitingRoom","_gameData$players$fin","gameId","navigate","gameData","setGameData","loading","setLoading","error","setError","countdown","setCountdown","unsubscribe","data","timer","setInterval","prev","clearInterval","handleStartGame","err","message","maxWidth","children","sx","minHeight","display","justifyContent","alignItems","color","isHost","players","find","p","name","host","flexDirection","elevation","width","textAlign","variant","component","gutterBottom","mb","map","player","primary","secondary","id","size","fullWidth","onClick","disabled","length","mt"],"sources":["C:/Users/hugoe/Downloads/react-19.0.0/src/pages/WaitingRoom.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { useParams, useNavigate } from 'react-router-dom';\r\nimport {\r\n  Container,\r\n  Typography,\r\n  Button,\r\n  Box,\r\n  Paper,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  CircularProgress,\r\n} from '@mui/material';\r\nimport { subscribeToGame, startGame } from '../utils/firebaseUtils';\r\n\r\nfunction WaitingRoom() {\r\n  const { gameId } = useParams();\r\n  const navigate = useNavigate();\r\n  const [gameData, setGameData] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [countdown, setCountdown] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const unsubscribe = subscribeToGame(gameId, (data) => {\r\n      setGameData(data);\r\n      setLoading(false);\r\n    });\r\n\r\n    return () => unsubscribe();\r\n  }, [gameId]);\r\n\r\n  useEffect(() => {\r\n    if (countdown > 0) {\r\n      const timer = setInterval(() => {\r\n        setCountdown((prev) => prev - 1);\r\n      }, 1000);\r\n      return () => clearInterval(timer);\r\n    } else if (countdown === 0) {\r\n      navigate(`/game/${gameId}`);\r\n    }\r\n  }, [countdown, gameId, navigate]);\r\n\r\n  const handleStartGame = async () => {\r\n    try {\r\n      setLoading(true);\r\n      await startGame(gameId);\r\n      setCountdown(5);\r\n    } catch (err) {\r\n      setError(err.message);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <Container maxWidth=\"sm\">\r\n        <Box\r\n          sx={{\r\n            minHeight: '100vh',\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n          }}\r\n        >\r\n          <CircularProgress />\r\n        </Box>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (!gameData) {\r\n    return (\r\n      <Container maxWidth=\"sm\">\r\n        <Box\r\n          sx={{\r\n            minHeight: '100vh',\r\n            display: 'flex',\r\n            justifyContent: 'center',\r\n            alignItems: 'center',\r\n          }}\r\n        >\r\n          <Typography color=\"error\">La sala no existe</Typography>\r\n        </Box>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  const isHost = gameData.players.find(p => p.isHost)?.name === gameData.host;\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\">\r\n      <Box\r\n        sx={{\r\n          minHeight: '100vh',\r\n          display: 'flex',\r\n          flexDirection: 'column',\r\n          justifyContent: 'center',\r\n          alignItems: 'center',\r\n        }}\r\n      >\r\n        <Paper\r\n          elevation={3}\r\n          sx={{\r\n            p: 4,\r\n            width: '100%',\r\n            textAlign: 'center',\r\n          }}\r\n        >\r\n          <Typography variant=\"h4\" component=\"h1\" gutterBottom>\r\n            Sala de Espera\r\n          </Typography>\r\n          \r\n          <Typography variant=\"h6\" color=\"primary\" gutterBottom>\r\n            Código de la sala: {gameId}\r\n          </Typography>\r\n\r\n          {error && (\r\n            <Typography color=\"error\" sx={{ mb: 2 }}>\r\n              {error}\r\n            </Typography>\r\n          )}\r\n\r\n          <Typography variant=\"body1\" sx={{ mb: 3 }}>\r\n            {countdown ? `El juego comenzará en ${countdown}...` : 'Esperando jugadores...'}\r\n          </Typography>\r\n\r\n          <List sx={{ mb: 3 }}>\r\n            {gameData.players.map((player) => (\r\n              <ListItem key={player.id}>\r\n                <ListItemText \r\n                  primary={player.name}\r\n                  secondary={player.isHost ? 'Host' : ''}\r\n                />\r\n              </ListItem>\r\n            ))}\r\n          </List>\r\n\r\n          {isHost && !countdown && (\r\n            <Button\r\n              variant=\"contained\"\r\n              size=\"large\"\r\n              fullWidth\r\n              onClick={handleStartGame}\r\n              disabled={loading || gameData.players.length < 3}\r\n            >\r\n              {loading ? 'Iniciando...' : 'Iniciar Juego'}\r\n            </Button>\r\n          )}\r\n\r\n          {countdown && (\r\n            <Box sx={{ display: 'flex', justifyContent: 'center', mt: 2 }}>\r\n              <CircularProgress />\r\n            </Box>\r\n          )}\r\n        </Paper>\r\n      </Box>\r\n    </Container>\r\n  );\r\n}\r\n\r\nexport default WaitingRoom; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}